// @kanety/stimulus-static-actions@1.1.0 downloaded from https://ga.jspm.io/npm:@kanety/stimulus-static-actions@1.1.0/dist/index.module.mjs

import{Context as t}from"@hotwired/stimulus";class r{constructor(t,i){this.identifier=t,this.name=i[0],this.descriptor=i[1],this.options=i[2]||{}}get description(){var t=this.descriptor;return t.match(/^:/)&&(t=t.replace(/^:/,this.identifier+":")),t.includes("->")?t.replace(/->/,"->"+this.identifier+"#"):this.identifier+"#"+t}}class e{constructor(t){this.context=t,this.controller=t.controller,this.actions=[]}run(){var t;this.add((t=function(t){for(var i=[];t;)i.push(t),t=Object.getPrototypeOf(t);return i.reverse()}(this.controller.constructor),Array.from(t.reduce(((t,i)=>(function(t,i){var o=t.actions;return Array.isArray(o)?o:[]}(i).forEach((i=>t.add(i))),t)),new Set))))}add(t){t.map((t=>new r(this.controller.identifier,t))).forEach((t=>{this.resolveTargets(t).forEach((i=>{this.addAction(i,t)})),this.actions.push(t)}))}remove(t){t.map((t=>new r(this.controller.identifier,t))).forEach((t=>{this.resolveTargets(t).forEach((i=>{this.removeAction(i,t)})),this.actions=this.actions.filter((i=>i.description!=t.description))}))}resolveTargets(t){var i=this.findTargets(t.name);return t.options.if?this.filterTargets(i,t.options.if):i}findTargets(t){return"element"==t?[this.controller.element]:this.controller[t+"Targets"]?[].concat(this.controller[t+"Targets"]):[]}filterTargets(t,i){return t.filter((t=>{var o=this.controller[i];return"function"==typeof o&&(o=o.apply(this.controller,t)),0!=o}))}addAction(t,i){var o=i.description,n=(t.dataset.action||"").split(" ");n.some((t=>t==o))||n.push(o),t.dataset.action=n.join(" ").trim()}removeAction(t,i){var o=i.description,n=(t.dataset.action||"").split(" ");n=n.filter((t=>t!=o)),t.dataset.action=n.join(" ").trim()}}var i=t.prototype.connect,o=t.prototype.targetConnected;t.prototype.connect=function(){return this.actionSet=new e(this),this.actionSet.run(),i.apply(this,arguments)},t.prototype.targetConnected=function(){return this.actionSet.run(),o.apply(this,arguments)};

